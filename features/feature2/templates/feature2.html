{% extends "base.html" %}

{% block title %}UAV Object Detection - Military WebApp{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/feature2.css') }}">
{% endblock %}

{% block content %}
<div class="feature-container">
    <!-- Header -->
    <div class="feature-header">
        <h1>UAV OBJECT DETECTION SYSTEM</h1>
        <p class="feature-subtitle">CAPTAIN ACCESS ONLY - SURVEILLANCE IMAGE ANALYSIS</p>
        <button class="back-btn" onclick="window.location.href='/dashboard'">‚óÑ BACK TO DASHBOARD</button>
    </div>

    <!-- Upload Section -->
    <div class="upload-section">
        <h2>IMAGE UPLOAD & PROCESSING</h2>
        
        <div class="upload-area" id="uploadArea">
            <div class="upload-content">
                <div class="upload-icon">üì°</div>
                <h3>DROP SURVEILLANCE IMAGES HERE</h3>
                <p>Or click to select multiple images</p>
                <p class="upload-info">Supported: JPG, PNG, GIF, BMP, TIFF, WebP | Max: 16MB per file</p>
                <input type="file" id="imageInput" multiple accept="image/*" hidden>
                <button class="select-btn" onclick="document.getElementById('imageInput').click()">SELECT IMAGES</button>
            </div>
        </div>

        <!-- File List -->
        <div class="file-list" id="fileList" style="display: none;">
            <h3>SELECTED FILES</h3>
            <div class="file-items" id="fileItems"></div>
            <div class="upload-controls">
                <button class="process-btn" id="processBtn">üöÄ START DETECTION</button>
                <button class="clear-btn" id="clearBtn">üóëÔ∏è CLEAR ALL</button>
            </div>
        </div>

        <!-- Progress Section -->
        <div class="progress-section" id="progressSection" style="display: none;">
            <h3>PROCESSING SURVEILLANCE DATA...</h3>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <p class="progress-text" id="progressText">Initializing YOLO detection system...</p>
        </div>
    </div>

    <!-- Results Section -->
    <div class="results-section" id="resultsSection" style="display: none;">
        <div class="results-header">
            <h2>DETECTION RESULTS</h2>
            <div class="results-controls">
                <button class="download-btn" id="downloadBtn">üì• DOWNLOAD ALL</button>
                <button class="new-scan-btn" id="newScanBtn">üîÑ NEW SCAN</button>
            </div>
        </div>

        <!-- Summary Stats -->
        <div class="stats-panel">
            <div class="stat-item">
                <span class="stat-label">IMAGES PROCESSED:</span>
                <span class="stat-value" id="processedCount">0</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">TOTAL DETECTIONS:</span>
                <span class="stat-value" id="totalDetections">0</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">SESSION ID:</span>
                <span class="stat-value" id="sessionId">---</span>
            </div>
        </div>

        <!-- Results Gallery -->
        <div class="results-gallery" id="resultsGallery"></div>
    </div>

    <!-- Image Modal -->
    <div class="modal" id="imageModal" style="display: none;">
        <div class="modal-content">
            <span class="modal-close">&times;</span>
            <img class="modal-image" id="modalImage" src="" alt="">
            <div class="modal-info">
                <h3 id="modalTitle">Image Details</h3>
                <div class="detection-details" id="modalDetections"></div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/feature2.js') }}"></script>
{% endblock %}